<!DOCTYPE html>
<html lang="ro">
    <head>
        <meta name="description" content="CDV-Design și Producție Publicitară oferă servicii complete de tipărire: reviste, bannere, roll-up-uri, cataloage și alte materiale publicitare.">
        <meta name="keywords" content="tipografie, design, productie publicitara, reviste, bannere, roll-up, cataloage">
        <link rel="stylesheet" href="/resurse/css/produse.css" type="text/css" />
        <link rel="stylesheet" href="/resurse/css/modal-produse.css" type="text/css" />
        <title>CDV - Pagina Produs</title>
        <%- include("../fragmente/head") %>     
        <script type="text/javascript" src="/resurse/js/produse.js"></script>
        <script type="text/javascript" src="/resurse/js/produse-cos.js"></script>
        <script type="text/javascript" src="/resurse/js/modal-produse.js"></script>
    </head>
    <body>
    <%- include("../fragmente/header") %>

    <main>
        <div class="container">
            <div class="row">
                <!-- Filtre -->
                <div class="col-12 mb-4">
                    <!-- Text input -->
                    <div class="form-floating mb-3 filtru-item">
                        <input type="text" class="form-control auto-filtering" id="inp-nume" placeholder="Nume produs">
                        <label for="inp-nume">Caută după nume</label>
                    </div>

                    <!-- Range pentru preț -->
                    <div class="form-group filtru-item">
                        <label for="inp-pret">Preț minim (<%- minPret %> - <%- maxPret %> RON):</label>
                        <input type="range" class="form-range auto-filtering" id="inp-pret" 
                               name="inp-pret" 
                               value="<%- minPret %>" 
                               min="<%- minPret %>" 
                               max="<%- maxPret %>"
                               step="1">
                        <span id="infoRange"><%- minPret %></span>
                    </div>

                    <!-- Range pentru gramaj -->
                    <div class="form-group filtru-item">
                        <label for="inp-gramaj">Gramaj (<%- minGramaj %> - <%- maxGramaj %> g):</label>
                        <input type="range" class="form-range auto-filtering" id="inp-gramaj" 
                               name="inp-gramaj" 
                               value="<%- minGramaj %>" 
                               min="<%- minGramaj %>" 
                               max="<%- maxGramaj %>"
                               step="10">
                        <span id="infoGramaj"><%- minGramaj %></span>
                    </div>

                    <!-- Datalist pentru materiale -->
                    <div class="mb-3 filtru-item">
                        <label for="inp-materiale" class="form-label">Materiale folosite:</label>
                        <input class="form-control auto-filtering" list="lista-materiale" id="inp-materiale">
                        <datalist id="lista-materiale">
                            <option value="Carton">
                            <option value="Hartie">
                            <option value="Plastic">
                            <option value="Metal">
                        </datalist>
                    </div>

                    <!-- Radio buttons pentru tip producție -->
                    <div class="mb-3 filtru-item">
                        <label class="form-label d-block">Tip producție:</label>
                        <div class="btn-group btn-group-toggle" role="group">
                            <input type="radio" class="btn-check auto-filtering" name="gr_rad" id="toate" value="toate" checked>
                            <label class="btn btn-outline-primary" for="toate">
                                <i class="bi bi-grid-3x3-gap"></i>
                                <span class="btn-text">Toate</span>
                            </label>

                            <input type="radio" class="btn-check auto-filtering" name="gr_rad" id="digital" value="digital">
                            <label class="btn btn-outline-primary" for="digital">
                                <i class="bi bi-laptop"></i>
                                <span class="btn-text">Digital</span>
                            </label>

                            <input type="radio" class="btn-check auto-filtering" name="gr_rad" id="offset" value="offset">
                            <label class="btn btn-outline-primary" for="offset">
                                <i class="bi bi-printer"></i>
                                <span class="btn-text">Offset</span>
                            </label>

                            <input type="radio" class="btn-check auto-filtering" name="gr_rad" id="large" value="large">
                            <label class="btn btn-outline-primary" for="large">
                                <i class="bi bi-arrows-angle-expand"></i>
                                <span class="btn-text">Large Format</span>
                            </label>
                        </div>
                    </div>

                    <!-- Checkboxuri pentru categorie -->
                    <div class="mb-3 filtru-item">
                        <label class="form-label d-block">Categorie:</label>
                        <div class="btn-group-vertical w-100">
                            <input type="checkbox" class="btn-check auto-filtering" id="standard" value="standard">
                            <label class="btn btn-outline-primary" for="standard">Standard</label>
                            
                            <input type="checkbox" class="btn-check auto-filtering" id="personalizat" value="personalizat">
                            <label class="btn btn-outline-primary" for="personalizat">Personalizat</label>
                            
                            <input type="checkbox" class="btn-check auto-filtering" id="evenimente" value="evenimente">
                            <label class="btn btn-outline-primary" for="evenimente">Evenimente</label>
                            
                            <input type="checkbox" class="btn-check auto-filtering" id="promotional" value="promotional">
                            <label class="btn btn-outline-primary" for="promotional">Promoțional</label>
                            
                            <input type="checkbox" class="btn-check auto-filtering" id="comanda-speciala" value="comanda speciala">
                            <label class="btn btn-outline-primary" for="comanda-speciala">Comandă specială</label>
                        </div>
                    </div>

                    <!-- Select simplu -->
                    <div class="mb-3 filtru-item">
                        <label for="select-dimensiune" class="form-label">Dimensiune:</label>
                        <select class="form-select auto-filtering" id="select-dimensiune">
                            <option value="">Oricare</option>
                            <option value="A4">A4</option>
                            <option value="A3">A3</option>
                            <option value="A2">A2</option>
                        </select>
                    </div>

                    <!-- Select multiplu -->
                    <div class="mb-3 filtru-item">
                        <label for="select-finisaje" class="form-label">Finisaje:</label>
                        <select class="form-select auto-filtering" id="select-finisaje" multiple>
                            <option value="laminare">Laminare</option>
                            <option value="lacuire">Lacuire UV</option>
                            <option value="emboss">Emboss</option>
                            <option value="folio">Folio</option>
                        </select>
                    </div>

                    <!-- Butoane acțiuni -->
                    <div class="butoane-container">
                        <button id="resetare" class="btn btn-secondary btn-icon-only">
                            <i class="bi bi-arrow-counterclockwise"></i>
                            <span class="btn-text">Resetare</span>
                        </button>
                        
                        <button id="sortare-cresc" class="btn btn-primary btn-icon-only">
                            <i class="bi bi-sort-up"></i>
                            <span class="btn-text">Sortare Crescător</span>
                        </button>
                        
                        <button id="sortare-desc" class="btn btn-primary btn-icon-only">
                            <i class="bi bi-sort-down"></i>
                            <span class="btn-text">Sortare Descrescător</span>
                        </button>
                        
                        <button id="calculeaza" class="btn btn-info btn-icon-only">
                            <i class="bi bi-calculator"></i>
                            <span class="btn-text">Calculează Statistici</span>
                        </button>
                    </div>

                    <!-- BONUS 4: Indicatori filtrare automată -->
                    <div class="auto-filter-info">
                        <div class="auto-filter-badge">
                            <i class="bi bi-funnel-fill"></i>
                            Filtrare automată activă
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <section id="produse">
            <h2>Produse</h2>
            <!-- BONUS 15: Contor produse -->
            <div class="contor-produse">
                <div class="info-produse">
                    <span class="numar-afisat">0</span>
                    <span>produse afișate din</span>
                    <span class="numar-total"><%- locals.produse.length %></span>
                    <span class="filtru-activ">(filtre active)</span>
                </div>
            </div>
            <div id="grid-produse" class="grid-produse">
                <% for( let prod of locals.produse) { %>
                    <article class="produs <%- prod.produs_nou ? 'produs-nou' : '' %> <%- prod.cel_mai_ieftin ? 'cel-mai-ieftin' : '' %>">
                        <% if (prod.produs_nou) { %>
                            <span class="marcaj-nou"><i class="bi bi-star-fill"></i> Produs Nou</span>
                        <% } %>
                        <% if (prod.cel_mai_ieftin) { %>
                            <span class="marcaj-ieftin"><i class="bi bi-trophy-fill"></i> Cel mai ieftin</span>
                        <% } %>
                        <h3 class="nume">Nume: <a href="/produs/<%- prod.id %>" class="product-link"><span class="val-nume"><%- prod.nume %></span></a></h3>
                        <div class="info-prod">
                            <p class="pret">Preț: <span class="val-pret"><%- prod.pret %></span> RON</p>
                            <p class="gramaj">Gramaj: <span class="val-gramaj"><%- prod.gramaj %></span> g/m²</p>
                            <p class="dimensiune">Dimensiune: <span class="val-dimensiune"><%- prod.dimensiune %></span></p>
                            <p class="tip">Tip: <span class="val-tip"><%- prod.tip_produs %></span></p>
                            <p class="materiale">Materiale: <span class="val-materiale"><%- prod.materiale %></span></p>
                        </div>
                        <p class="categorie">Categorie: <span class="val-categorie"><%- prod.categorie %></span></p>
                        <figure>
                            <img src="/resurse/imagini/produse/<%- prod.imagine %>" style="width:50%;height:auto;" alt="[imagine <%- prod.nume %>]" />
                        </figure>
                        <label class="selecteaza-cos">
                            Selectează:<br/>
                            <input type="checkbox" class="select-cos" value="<%- prod.id %>" autocomplete="off">
                        </label>
                    </article>
                <% } %>
            </div>
        </section>
    </main>

    <%- include("../fragmente/footer") %>
    </body>
</html>